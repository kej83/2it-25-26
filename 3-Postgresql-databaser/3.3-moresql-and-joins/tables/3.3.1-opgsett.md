# Friidrett-database (PostgreSQL) – Oppgavehefte + løsningsdokument

**Navn:** ____________________  
**Dato:** ____________________  
**Klasse:** __________________

---

## Mål for økta
Du skal kunne:
- Lage flere tabeller med **primærnøkler (PK)** og **fremmednøkler (FK)**
- Registrere **utøvere**, **grener** og **resultater**
- Søke opp data med `SELECT`, `WHERE`, `ORDER BY`, `LIMIT`
- Bruke **JOIN** for å hente sammenhengende informasjon fra flere tabeller
- Levere et ryddig **Markdown-dokument** der du viser løsningene dine

---

## Regler / krav
- Bruk PostgreSQL-syntaks.
- Alle tabeller skal ha en `id` som **PRIMARY KEY**.
- Resultattabellen skal ha **FK til både utøver og gren**.
- Svar med SQL i kodeblokker.
- Når du får feilmelding: les den, og fiks årsaken (ofte FK/typer/navn).

---

# Del 0 – Oppstart (gjør dette først)

## 0.1 Lag en ny database (hvis dere skal)
Forklar hvordan du gjorde dette her:



---

# Del 1 – Datamodell (tabeller)

Vi skal lage disse tabellene:

1. `athlete` (utøver)
2. `event` (gren/øvelse)
3. `meet` (stevne)
4. `result` (resultat) – kobler sammen utøver + gren + stevne

---

## 1.1 Lag tabellen `athlete`

Krav til kolonner:

* `id` (PK)
* `first_name` (tekst)
* `last_name` (tekst)
* `gender` (tekst, f.eks. 'F' eller 'M')
* `birth_year` (tall)
* `club` (tekst, kan være NULL)

```sql
-- SVAR (SQL-koden som lager tabellen):
```

---

## 1.2 Lag tabellen `event`

Krav til kolonner:

* `id` (PK)
* `name` (tekst, f.eks. '100m', 'Lengde', 'Spyd')
* `category` (tekst, f.eks. 'løp', 'hopp', 'kast')
* `unit` (tekst: 's' for sekunder eller 'm' for meter)

```sql
-- SVAR (SQL):
```

---

## 1.3 Lag tabellen `meet` (stevne)

Krav til kolonner:

* `id` (PK)
* `name` (tekst)
* `location` (tekst)
* `meet_date` (dato)

```sql
-- SVAR (SQL):
```

---

## 1.4 Lag tabellen `result`

Krav til kolonner:

* `id` (PK)
* `athlete_id` (FK -> athlete.id)
* `event_id` (FK -> event.id)
* `meet_id` (FK -> meet.id)
* `result_value` (tall, f.eks. 12.34 eller 6.55)
* `wind` (tall, kan være NULL)  *(vind er vanlig i sprint/lengde)*
* `attempt` (tall, f.eks. 1,2,3…)
* `created_at` (timestamp, default nå)

**Viktig:** `athlete_id`, `event_id`, `meet_id` skal være fremmednøkler.

```sql
-- SVAR (SQL):
```

---

## 1.5 (Bonus) Legg på en unik regel i `result`

Eksempel: Det skal ikke være lov å ha *samme* (utøver + gren + stevne + forsøk) flere ganger.

```sql
-- SVAR (SQL):
```

---

# Del 2 – Fyll inn testdata

## 2.1 Sett inn minst 8 utøvere

Minst 8 rader i `athlete`. Bruk gjerne ulike klubber.

```sql
-- SVAR (SQL):
```

---

## 2.2 Sett inn minst 6 grener

Forslag:

* 100m (løp, s)
* 200m (løp, s)
* 800m (løp, s)
* Lengde (hopp, m)
* Høyde (hopp, m)
* Kule (kast, m)

```sql
-- SVAR (SQL):
```

---

## 2.3 Sett inn minst 3 stevner

Med datoer og steder.

```sql
-- SVAR (SQL):
```

---

## 2.4 Sett inn minst 20 resultater

Krav:

* Resultater skal bruke riktige `athlete_id`, `event_id`, `meet_id`
* Bruk `attempt` (minst noen med attempt 1 og 2)
* Noen rader skal ha `wind`, noen NULL

```sql
-- SVAR (SQL):
```

---

# Del 3 – Enkle spørringer (uten JOIN)

## 3.1 Vis alle utøvere

```sql
-- SVAR (SQL):
```

---

## 3.2 Vis utøvere sortert på etternavn A–Å

```sql
-- SVAR (SQL):
```

---

## 3.3 Finn alle utøvere fra én bestemt klubb

Velg en klubb du har i dataene dine.

```sql
-- SVAR (SQL):
```

---

## 3.4 Finn alle grener i kategorien 'løp'

```sql
-- SVAR (SQL):
```

---

## 3.5 Vis de 5 beste resultatene i en bestemt gren (uten JOIN)

Her må du velge en `event_id` selv.

> Tips: For løp (sekunder) er lavest best. For hopp/kast (meter) er høyest best.

```sql
-- SVAR (SQL):
```

---

# Del 4 – JOIN (koble tabeller)

## 4.1 JOIN: Resultat + utøver (navn)

Vis:

* resultat-id
* utøver fornavn + etternavn
* result_value

```sql
-- SVAR (SQL):
```

---

## 4.2 JOIN: Resultat + gren (gren-navn)

Vis:

* resultat-id
* gren-navn
* unit
* result_value

```sql
-- SVAR (SQL):
```

---

## 4.3 JOIN: Resultat + utøver + gren (2 JOINs)

Vis:

* utøvernavn
* gren
* result_value
* attempt

```sql
-- SVAR (SQL):
```

---

## 4.4 JOIN: Resultat + utøver + gren + stevne (3 JOINs)

Vis:

* utøvernavn
* gren
* stevnenavn
* meet_date
* result_value
* wind

Sorter slik at det blir lett å lese (f.eks. etter dato, gren, navn).

```sql
-- SVAR (SQL):
```

---

## 4.5 Filtrering med JOIN: Finn alle resultater for én utøver

Velg én utøver (f.eks. med `athlete.id`).

```sql
-- SVAR (SQL):
```

---

## 4.6 Filtrering med JOIN: Finn alle resultater i én gren (med gren-navn)

Velg én gren (f.eks. `event.name = '100m'`).

```sql
-- SVAR (SQL):
```

---

## 4.7 Kombinert filter: én gren + ett stevne

Eksempel: alle 100m-resultater i “Vårstevnet”.

```sql
-- SVAR (SQL):
```

---

# Del 5 – “Beste resultat”-oppgaver (JOIN + ORDER)

## 5.1 Beste resultat i 100m (lavest tid) med navn

Vis kun **beste** (top 1) i én løpsgren.

```sql
-- SVAR (SQL):
```

---

## 5.2 Beste resultat i Lengde (høyest) med navn

Vis kun **beste** (top 1) i én hopp/kast-gren.

```sql
-- SVAR (SQL):
```

---

## 5.3 Topp 5 i en valgfri gren, med utøvernavn + stevne

Velg selv en gren.

```sql
-- SVAR (SQL):
```

---

# Del 6 – Litt mer sammensatt (JOIN + gruppering)

## 6.1 Antall resultater per utøver

Vis:

* utøvernavn
* antall registrerte resultater

Sorter slik at de med flest kommer øverst.

```sql
-- SVAR (SQL):
```

---

## 6.2 Antall resultater per gren

Vis:

* gren-navn
* antall resultater

```sql
-- SVAR (SQL):
```

---

## 6.3 Finn utøvere som har mer enn 2 resultater registrert (HAVING)

Vis:

* utøvernavn
* antall

```sql
-- SVAR (SQL):
```

---

# Del 7 – “Ekte” kombinasjonsoppgaver (flere JOIN + WHERE + ORDER + LIMIT)

## 7.1 Finn alle resultater der:

* gren er løp (`event.category = 'løp'`)
* og vind er registrert (ikke NULL)
  Sorter etter høyest vind først.

```sql
-- SVAR (SQL):
```

---

## 7.2 Finn topp 3 resultater for en gren, men kun for ett bestemt stevne

Vis:

* utøvernavn
* gren
* stevne
* resultat

```sql
-- SVAR (SQL):
```

---

## 7.3 “Profilvisning” av en utøver

For én utøver: vis alle resultater med

* dato
* stevne
* gren
* resultat
  Sorter kronologisk.

```sql
-- SVAR (SQL):
```

---

# Del 8 – Refleksjon (kort tekst)

## 8.1 Hva er en fremmednøkkel (FK), og hvorfor bruker vi det her?

Skriv 2–4 setninger.

**Svar:**
...

## 8.2 Hvorfor trenger vi JOIN i dette prosjektet?

Skriv 2–4 setninger.

**Svar:**
...

---

# Ekstra (valgfritt)

Velg én:

* A) Lag en VIEW som viser “resultatliste” (utøver + gren + stevne + resultat)
* B) Lag en spørring som finner “beste resultat per utøver i en bestemt gren”
* C) Legg til en kolonne `pb` (personal best) ved å sammenligne (avansert)

```sql
-- SVAR (SQL):
```

---

## Sjekkliste før innlevering

* [ ] Jeg har laget alle 4 tabellene med PK og FK
* [ ] Jeg har lagt inn nok testdata (8 utøvere, 6 grener, 3 stevner, 20 resultater)
* [ ] Jeg har minst 6 JOIN-oppgaver løst
* [ ] Jeg har limt inn SQL som kjører uten feil
* [ ] Dokumentet mitt er ryddig og lett å lese
* [ ] Jeg har konvertert min .md til .pdf og levert PDF i Teams.
